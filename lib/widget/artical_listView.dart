import 'package:flutter/material.dart';import 'package:flutter_bloc/flutter_bloc.dart';import 'package:newsapp/manger/cubit.dart';import 'package:newsapp/manger/state.dart';import 'package:newsapp/model/artical.dart';import 'package:newsapp/network/api_service.dart';import 'package:newsapp/widget/artical_item.dart';class ArticalListview extends StatefulWidget {  const ArticalListview({super.key});  @override  State<ArticalListview> createState() => _ArticalListviewState();}class _ArticalListviewState extends State<ArticalListview> {  List<ArticalModel>? x ;  ApiService apiService =ApiService();  @override  void initState()  {    getNews();    // TODO: implement initState    super.initState();  }  getNews()async{    ApiService apiService =ApiService();    x =await apiService.get(endpoint: 'top-headlines?country=us&category=business&apiKey=6b0c10e58ff54f4caa1e9f252329dc30');    setState(() {    });  }  @override  Widget build(BuildContext context) {    return BlocBuilder <AppCubit, AppState>(builder: (context, state) {      if (state is LoadedState) {      return  x==null?SliverToBoxAdapter(child: Center(child: CircularProgressIndicator(),)): SliverList.builder(          itemBuilder: (context,index){            return ArticalItem(articalModel:x![index],);          },itemCount: x!.length,);      }      else if (state is ErrorState) {        return SliverToBoxAdapter(child: Text("Error ${state.errorMessage}"));      }      else {        return SliverToBoxAdapter(child: Center(child: CircularProgressIndicator(),));      }    });  }}